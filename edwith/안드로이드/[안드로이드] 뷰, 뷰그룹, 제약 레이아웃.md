# [안드로이드] 뷰, 뷰그룹, 제약 레이아웃

**Warning Notice:** 이 글은 **Do it! 안드로이드 앱 프로그래밍 - 개정 7판 (정재곤)** 도서를 읽고 개인적인 학습을 위해서 정리한 내용입니다. 틀린 내용이 있을 수 있습니다.


## 안드로이드 앱 화면 배치

안드로이드 스튜디오를 이용해서 앱을 개발할때 안드로이드 앱의 화면 배치(레이아웃)은 2개의 파일을 이용해서 구성한다.

- **/res/layout 폴더 및의 .xml 파일** : xml의 태그와 각 태그 안의 속성을 이용해서 안드로이드 앱 내부의 구성 요소를 디자인한다.
- **.java 파일** : xml 파일을 이용해서 생성한 앱 내부의 요소들에 대해서 이벤트를 처리하거는 등의 동적인 처리를 한다. 또한 xml 파일에 없던 구성요소를 동적으로 생성하여 추가하거나, 존재하고 있던 구성요소를 제거할 수 있다.

## 뷰, 뷰 그룹(View, ViewGroup)

- **뷰 (View)** : 안드로이드 앱의 화면에 존재하는 모든 구성요소를 의미한다.
- **뷰 그룹 (ViewGroup)** : 화면에 보이지 않지만 내부에 다른 뷰를 담을 수 있는 구성요소를 의미한다.

![view](https://user-images.githubusercontent.com/31771548/97866350-211b6f00-1d4f-11eb-99fc-c17748510428.png)

뷰와 뷰 그룹의 상속 관계도를 보면 뷰 그룹이 뷰를 상속하고 있다. 뷰 그룹 역시 뷰로 취급될 수 있다는 의미이다. 화면에 보여지는 요소와 다른 요소를 담는 구성요소를 구분하기 위해서 위젯(Widget)과 레이아웃(Layout)이라는 용어도 많이 사용된다.

- **위젯 (Widget)** : 앱 화면에 보여져서 사용자와 상호작용 할 수 있는 구성요소를 의미한다.
- **레이아웃 (Layout)** : 앱 화면에 보이지 않지만 내부에 다른 뷰들을 담아서 그것들이 어느 위치에 배치될 것인지를 결정하게 해주는 구성요소를 의미한다.

![viewgroup_2x](https://user-images.githubusercontent.com/31771548/97866158-bbc77e00-1d4e-11eb-8ad3-1902982f51b6.png)

뷰 그룹 역시 뷰로 처리될 수 있기 때문에 뷰 그룹안에 다른 뷰 그룹을 담을 수 있다. 이같은 특징은 복잡한 앱 화면을 구성하기 쉽게해준다.

### 뷰의 필수 속성 : layout_width, layout_height

뷰가 정상적으로 나타나려면 필수적으로 명시해야하는 속성이 있다. 모든 뷰는 반드시 **layout_width**, **layout_height** 속성을 명시해서 크기를 설정해줘야 한다. 이들 속성에 지정할 수 있는 속성값의 형태는 다음과 같다.

- **match_parent** : 뷰가 속한 부모 레이아웃에 여유 공간을 모두 채운다.
- **match_contraint 또는 0** : Contraint Layout의 경우 뷰가 속한 부모 레이아웃에 여유 공간을 모두 채운다.
- **wrap_content** : 뷰 내부의 내용 크기만큼만 공간을 차지한다.
- **px, dp 등의 단위가 붙은 설정된 숫자** : 해당 숫자가 나타내는 값만큼 공간을 차지한다.

## 제약 레이아웃(Contraint Layout)

**제약 레이아웃(Contraint Layout)** 은 뷰 그룹을 상속하고 있는 레이아웃으로서 제약 조건을 이용해서 내부 뷰들을 배치한다.

![contraintLayout](https://user-images.githubusercontent.com/31771548/97866601-925b2200-1d4f-11eb-97d4-281ef7ff9b33.PNG)

대표적인 제약조건은 뷰가 위치가 결정된 다른 뷰 기준 어느 방향으로 얼만큼 떨어져 있는지에 대한 조건이다. 이때 위치가 결정되어 다른 뷰의 위치를 잡는데에 기준이 되는 것을 **타깃(Target)** 이라고 하고, 현재 위치를 결정하고 있는 것을 **소스(Source)** 라고 한다. 소스와 타깃 사이의 제약조건 설정은 다음과 같은 방법으로 설정할 수 있다.

- 디자인 탭에서 소스 뷰의 네 면 가운데에 마우스 포인터를 위치시키면 나타나는  **연결점(Anchor Point)** 을 대상 뷰의 면에 위치시킨다.
- xml 코드 탭에서 `app:layout_constraint` 속성을 지정한다. 속성 지정법은 다음과 같다.
  - `app:layout_constraint[소스뷰의 연결점]_to[타깃뷰의 연결점]of=[타깃뷰 id]`

디자인 탭에서 제약조건을 설정하면 자동으로 소스코드에 반영이 된다. 반영된 결과는 다음과 같다.

```xml
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="onButton1Clicked"
        android:text="안녕 안드로이드"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintLeft_toLeftOf="parent"
        app:layout_constraintRight_toRightOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginStart="48dp"
        android:layout_marginLeft="48dp"
        android:layout_marginTop="72dp"
        android:onClick="onButton2Clicked"
        android:text="웹보이기"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginStart="108dp"
        android:layout_marginLeft="108dp"
        android:layout_marginTop="72dp"
        android:text="Button"
        app:layout_constraintStart_toEndOf="@+id/button"
        app:layout_constraintTop_toTopOf="parent" />

</androidx.constraintlayout.widget.ConstraintLayout>
```

제약 레이아웃에서 뷰가 배치되기 위해서 최소 2개의 제약조건이 필요하다. 소스 뷰의 좌우 연결점에 대한 제약조건 1개와 상하 연결점에 대한 제약 조건 1개가 설정되어야 뷰를 정상적으로 배치시킬 수 있다. 각각의 제약 조건에는 `android:layout_marginTop="72dp"` 와 같이 타깃 뷰에서 얼만큼 떨어져야 하는지 명시할 수 있다.

### 가이드 라인 (Guide Line)

가이드 라인은 화면에 보이지 않지만 제약 레이아웃에 위치하여 다른 뷰들이 제약 조건을 설정하는데에 도움을 줄 수 있는 구성요소이다. Horizontal, Vertial 2 종류가 있으며 다른 뷰들을 해당 가이드 라인에 대해서 제약 조건을 설정하도록 하여 일정하여 정렬(Align)시킬 수 있다.

![guideline](https://user-images.githubusercontent.com/31771548/97868826-bc164800-1d53-11eb-9695-e4f7a64a26ab.PNG)

### 가운데 배치, 바이어스(bias)

제약 레이아웃에 있는 뷰에 대해서 상하 제약 조건을 모두 설정하거나, 좌우 제약 조건을 모두 설정하면 각각 세로 축으로 가운데, 가로 축으로 가운데에 위치하게 되며, 상하좌우 모든 방향에 제약조건을 설정하면 화면의 정 가운데에 뷰가 위치하게 된다.

![bias](https://user-images.githubusercontent.com/31771548/97868396-f206fc80-1d52-11eb-976d-6f9af45d5f8e.PNG)

상하 또는 좌우에 모두 제약조건을 설정한 경우 **바이어스(bias)** 를 설정하여 뷰가 제약 레이아웃에서 가운데를 50이라는 값으로 기준을 잡았을때 얼만큼 상하 또는 좌우 방향으로 치우쳐져 있어야 하는지를 명시할 수 있다. xml 코드에서는 `app:layout_constraintHorizontal_bias="0.75"` 와 같은 속성을 지정하여 바이어스를 설정할 수 있다.
