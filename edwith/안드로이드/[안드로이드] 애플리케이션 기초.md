# [안드로이드] 애플리케이션 기초 (Application Fundamental)

안드로이드 애플리케이션은 자바, 코틀린, C++ 언어로 작성될 수 있으며, Android SDK는 작성된 소스코드를 컴파일하고, 앱과 관련된 여러 리소스들과 `.apk` 의 확장자를 갖는 패키지로 묶는다. 안드로이드 애플리케이션은 다음과 같은 특징을 갖는다.

- 안드로이드 OS는 멀티 유저 리눅스 운영체제를 기반으로 실행된다. 또한 각각의 앱에 다른 리눅스 user id를 부여하여 관리한다.
- 각각의 앱과 관련된 파일들은 해당 앱의 user id를 통한 permission 이 설정된다. 따라서 파일 소유자로 설정된 user id 를 갖는 것들만 해당파일에 접근할 수 있다.
- 각각의 안드로이드 앱은 별도의 프로세스에서 실행된다. 각 프로세스에는 자바 또는 코틀린으로 작성된 앱을 실행하기 위한 VM이 실행되고 있고, 이 위에서 애플리케이션이 실행된다.
- 안드로이드 애플리케이션은 데스크탑 애플리케이션과는 다르게 진입점(Entry Point, main() 메소드와 같은 형태)이 유일하게 존재하지 않고, 여러 곳에서 애플리케이션을 실행할 수 있는 진입점이 존재한다.

## 애플리케이션 구성 요소 (App Components)

안드로이드 애플리케이션 구성요소(Component)는 앱을 구성하는 building block 들이다. 총 4가지 종류의 구성요소가 존재한다.

- **액티비티 (Activity)** : 사용자와 상호작용할 수 있는 화면을 표시하고, 관련 동작을 수행한다. `Activity` 클래스를 상속하여 작성할 수 있다. 시스템이나 다른 앱에서 액티비티를 실행시켜 앱을 시작하는 진입점 역할도 수행한다.
- **서비스 (Service)** : 애플리케이션이 사용자에게 보여지지 않는 상황에서도 실행될 수 있는 구성요소이다. 즉, 화면에 보여지지 않고 백그라운드에서 실행되어 특정 작업을 수행하는 구성요소다.
  - started service : 백그라운드에서 네트워크 통신을 수행하거나, 음악을 재생하는 서비스. 사용자가 서비스의 동작을 인식하지 못하는 형태와 인식할 수 있는 형태로 구분할 수 있다.
  - bounded service : 다른 앱의 구성요소가 특정 작업을 위해서 서비스에 bound 되어 서비스가 제공하는 기능을 사용할 수 있다. 이때 서비스는 일종의 API 서버 역할을 수행한다.
- **브로드캐스트 리시버 (Broadcast Receiver)** : 시스템이나 다른 애플리케이션에서 전달하는 일종의 알림을 처리하는 구성요소다. 베터리 잔량이 부족하다던지, 화면이 꺼졌다던지와 같은 상황에서 시스템이 전달하는 브로드캐스트 메지지를 수신하여 이와 관련된 동작을 수신한다.
- **내용 제공자 (Contents Provider)** : 앱 내부 데이터를 다른 앱에게 제공해주는 구성요소다. 안드로이드 보안 정책상 다른 앱의 데이터를 함부로 접근할 수 없는데, 이런 문제를 해결해주는 구성요소다. 내용 제공자는 앱 진입점으로 사용되지 않는 구성요소다.

### 구성요소 동작시키기 (Activating Components)

안드로이드 앱의 각각의 구성요소는 **인텐트(Intent)** 라는 메시지를 통해서 동작시킬 수 있다. 이때 안드로이드 앱만의 독특한 특징이 있는데, 앱의 구성요소를 다른 앱에서도 인텐트(Intent)라는 것을 이용해서 실행시킬 수 있다는 것이다. 예를 들어서 사진을 찍는 애플리케이션에서 이메일 애플리케이션의 액티비티를 실행시켜 방금 찍힌 사진을 첨부하는 이메일을 작성하도록 할 수 있다.

안드로이드 애플리케이션은 각각 별도의 프로세스에서 구분되어 실행되기 때문에 다른 애플리케이션의 구성요소에 직접적으로 접근하거나 실행시킬 수는 없다. 대신 다른 애플리케이션의 구성요소를 실행시키고 싶다는 의도(Intent)를 안드로이드 시스템에 전달하면, 시스템은 인텐트에 명시된 애플리케이션의 프로세스를 시작하고, 해당 구성요소를 실행하고 관리하기 시작한다.

인텐트는 특정 구성요소를 명확하게 제시하는 **명시적 인텐트(Explicit Intent**) 와 어떤 동작을 수행할 수 있는 구성요소를 원한다는 **암시적 인텐트(Implicit Intent)** 로 구분할 수 있다.

## 매니페스트 파일 (The Manifest file)

안드로이드 OS 시스템이 애플리케이션이 어떤 구성요소로 이루어져 있는지 알고 있어야 전달받은 인텐트에 해당하는 적절한 앱 구성요소를 실행시킬 수 있을 것이다. 따라서 앱이 어떤 구성요소로 이루어져 있는지 명확하게 밝힐 필요가 있는데, 이런 역할을 하는 것이 **`AndroidManifest.xml`** 파일이다.

애플리케이션의 구성요소를 밝히는 것 외에 매니페스트 파일은 다음과 같은 추가적인 역할을 수행한다.

- 애플리케이션이 동작하는데 필요한 최소한의 SDK 버전이나 하드웨어 소프트웨어 제약사항을 명시한다. 이같은 제약사항은 사용자의 디바이스가 애플리케이션을 실행하기에 적절한 하드웨어, 소프트웨어 환경을 갖추고 있지 않는데도 앱을 설치하는 것을 방지해준다.
- 액티비티에 **인텐트 필터 (Intent Filter)** 라는 것을 설정하여, 앱 구성요소가 어떤 능력을 가지고 있는지 명시할 수 있다. 이는 안드로이드 시스템이 어떤 암시적 인텐트를 전달받았을때 해당 인텐트에 명시된 동작을 처리해줄수 있는 애플리케이션 구성요소가 어떤것이 있는지 인텐트 필터와 비교해보면서 찾을 수 있도록 해준다.
- 애플리케이션이 동작하는데 필요한 사용자 권한(인터넷 사용, 저장장치 접근, 연락처에 접근 등)을 명시한다.

## 앱 리소스 (App Resources)

안드로이드 앱의 리소스는 자바나 코틀린 소스코드와 분리되어 관리된다. 앱 리소스에는 이미지 파일, 각종 문자열, 스타일을 명시하는 xml, 화면 레이아웃 xml 파일 등으로 구성된다. 앱 리소스 파일이 소스코드와 분리되어 있어 디바이스의 화면 크기나 설정 변경사항에 있어서 소스코드 수정없이 손쉽게 해당 변경에 대응하여 앱을 변경할 수 있도록 도와준다. 예를 들어 디바이스의 가로화면과 세로화면에 대응하는 레이아웃 파일을 따로 구성하면, 사용자가 가로화면에서 세로화면으로 변경했을때, 이에 대응하는 레이아웃 파일이 자동으로 로드되어 화면에 표시된다.

안드로이드 앱 리소스에는 이들을 참조하기 쉽도록 별도의 정수 ID 값이 부여되며 `R.drawble.photo_dog` 와 같은 이름으로 손쉽게 참조할 수 있다.
