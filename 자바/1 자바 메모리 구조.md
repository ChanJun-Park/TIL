# 자바 메모리 구조 (Java Runtime Data Area)

## Java 프로그램이 실행되는 구조

자바 프로그램은 다음과 같은 구성 요소들에 의해서 실행된다. 

- 컴파일러(Compiler) : 먼저 자바 컴파일러(javac)에 의해서 자바 소스 코드가 자바 클래스(자바 바이트 코드)로 컴파일 된다.
- 클래스 로더(Class Loader) : 실행에 필요한 자바 클래스를 디스크로부터 메모리로 불러오는 기능을 한다. 자바 클래스는 해당 클래스를 사용하는 시점에 메모리로 로드된다.
- Execution Engine : 자바 바이트 코드를 실제 운영체제에서 실행 가능한 명령어로 해석하는 역할을 한다.
- Java Runtime Data Area : 자바 프로그램과 관련된 데이터를 관리하는 메모리 구조이다.
- Garbage Collector : 힙 메모리 영역에서 오랫동안 참조가 되지 않은 클래스 객체(Garbage)를을 정리하고 메모리 공간을 확보하는 프로그램이다.

## Java Runtime Data Area

자바 메모리 구조는 다음과 같은 구성요소들로 이루어진다.

- 메소드 영역 : 클래스와 관련된 메타 정보(메소드 데이터, 메소드 코드, 생성자 코드, static 멤버 상수, 런타임 상수풀), 자바 프로그램 실행을 위해서 필요한 기본 데이터를 저장한다.
- 힙 영역 : 동적으로 생성되는 클래스 객체들을 저장하는 공간이다.
- Java Language 스택 영역 : 메소드 안에서 사용되는 로컬 변수들을 위한 공간이다. 스레드 별로 별도의 스택 영역이 할당된다. 메소드 호출시 메소드에 대한 프레임이 스택으로 들어간다. 해당 메소드에서 사용되는 변수들을 LIFO 형식으로 관리한다.
- Java Native program 스택 영역 : JNI 프로그램을 위한 스택 영역이다.
- PC(Program Counter) 영역 : 각 스레드 별로 다음에 어떤 명령어를 실행하는 지를 저장하는 메모리 공간.

### 힙 영역 (Heap)

힙 영역은 새로 생성되는 클래스 객체를 저장하기 위한 메모리 공간이다. 힙 영역은 또한 다음과 같은 구성요소로 이루어진다.

- Young Generation : 최근에 생성되는 클래스 객체를 위해서 할당된 공간이다. Minor GC가 일어나는 영역이다.
  - Eden : 새로 생성되는 클래스 객체를 위한 영역.
  - Survivor1, 2 : Minor GC가 실행된 후 Eden 영역에서 살아남은 객체들이 이동하는 장소. 이곳에서 일정량의 Minor GC Cycle 후에도 살아남은 객체들은 Old Generation 영역으로 이동한다.
- Old Generation : 아주 오랫동안 참조된 객체들을 저장하는 공간이다. Major GC가 일어나는 영역이다. Major GC는 Minor GC보다 프로그램 실행에 더 큰 영향을 미칠 수 있는 동작이다.
