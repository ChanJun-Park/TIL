# web

## @RestController

- ì»¨íŠ¸ë¡¤ëŸ¬ ë‚´ë¶€ì˜ ëª¨ë“  ë©”ì†Œë“œ ajax ìš”ì²­ì„ ì²˜ë¦¬í•¨
- spring version 4 ë¶€í„° ì‚¬ìš©í• ìˆ˜ ìˆìŒ

## íŒŒì¼ ì—…ë¡œë“œ

### form íƒœê·¸ ì„¤ì •

```html
<form action="" method="" enctype="">
```

#### enctype íƒ€ì…

- (ê¸°ë³¸) application/x-www-form-urlencoded, í•œê¸€ì€ url ì¸ì½”ë”© %16ì§„ìˆ˜ 2ìë¦¬, íŒŒë¦¬ë¯¸í„°ë“¤ì„ &ë¡œ ë¶„ë¦¬í•´ì„œ ì „ì†¡í•´ì¤Œ
- multipart/form-data : ì—¬ëŸ¬ íŒŒíŠ¸ë¡œ ë‚˜ëˆ„ì–´ ì „ì†¡, íŒŒì¼ ì—…ë¡œë“œì‹œ ì‚¬ìš©
  - request.getInputStream() ì‚¬ìš©
- text/plain : ì¸ì½”ë”©í•˜ì§€ ì•Šì€ ìƒíƒœë¡œ ì „ì†¡

#### íŒŒì¼ ì „ì†¡í•˜ê¸°

- `get` ë°©ì‹ì´ ì•„ë‹Œ `post` ë°©ì‹ìœ¼ë¡œ ì§€ì •
- enctype ì„ multipart/form-data ë¡œ ì§€ì •
- `<input type=file name='a'>` ë¡œ ì„¤ì •

#### servletìœ¼ë¡œ íŒŒì¼ ì „ì†¡ ì²˜ë¦¬

```java
public class UploadServlet extends HttpServlet {

	protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
		response.setContentType("text/html;charset=utf-8");
		PrintWriter out = response.getWriter();
		out.println("<h1>" + request.getParameter("name") + "</h1>");
		out.println("<h1>" + request.getParameter("description") + "</h1>");
		out.println("<h1>" + request.getParameter("file1") + "</h1>");
		
		InputStreamReader isr = new InputStreamReader(request.getInputStream());
		BufferedReader br = new BufferedReader(isr);
		for (String line; (line = br.readLine()) != null;) {
			out.println(line + "<br>");
		}
	}

}
```

ê²°ê³¼

```txt
------WebKitFormBoundaryVy1Bodc0ZMFdjz30
Content-Disposition: form-data; name="name"

abcdefg
------WebKitFormBoundaryVy1Bodc0ZMFdjz30
Content-Disposition: form-data; name="description"

íŒŒì¼ì²¨ë¶€í• ê²Œ
------WebKitFormBoundaryVy1Bodc0ZMFdjz30
Content-Disposition: form-data; name="file1"; filename="Oracle Server Architecture.PNG"
Content-Type: image/png

ï¿½PNG


IHDRï¿½MtCJsRGBï¿½ï¿½ï¿½gAMAï¿½ï¿½ï¿½a pHYsï¿½ï¿½ï¿½oï¿½duï¿½IDATx^ï¿½ï¿½ï¿½{ï¿½ï¿½ï¿½ï¿½ï¿½9ï¿½Yï¿½rï¿½ï¿½ï¿½ï¿½Aï¿½ï¿½8ï¿½mYï¿½>Rï¿½bï¿½-ãï¿½ ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½{ï¿½qï¿½ï¿½ï¿½^ï¿½zï¿½5#Vï¿½Ù•dï¿½ï¿½ï¿½ï¿½q]ï¿½ï¿½;ï¿½;;ï¿½ï¿½ï¿½kï¿½ï¿½ï¿½ï¿½ï¿½@ï¿½BGï¿½:ï¿½ï¿½ï¿½<ï¿½ï¿½ï¿½ï¿½ tï¿½#xï¿½@ï¿½BGï¿½:ï¿½ï¿½ï¿½<ï¿½ï¿½ï¿½ï¿½ tï¿½#xï¿½@ï¿½BGï¿½:ï¿½ï¿½ï¿½<ï¿½ï¿½ï¿½ï¿½ tï¿½#xï¿½@ï¿½BGï¿½:ï¿½ï¿½ï¿½<ï¿½ï¿½ï¿½ï¿½ t@hï¿½?ï¿½ï¿½._ï¿½kï¿½ï¿½Ş´ï¿½Gï¿½Úºİ—lï¿½s6mï¿½)ï¿½ï¿½
ï¿½}ï¿½ï¿½N;l=&ï¿½ï¿½ï¿½ï¿½ï¿½#ï¿½ï¿½gCvï¿½GwÙ¿ï¿½lï¿½-ï¿½/{ï¿½...
```

#### springì—ì„œ íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬

1. pom.xml ì— ë¼ì´ë¸ŒëŸ¬ë¦¬ ë‹¤ìš´ë¡œë“œ : `commons-fileupload.jar`


### íŒŒì¼ ì—…ë¡œë“œ ì„¤ì •

- ì´ë¦„ ì¶©ëŒ
- íŒŒì¼ ì—…ë¡œë“œ í•˜ì§€ ì•Šì€ ê²½ìš°

### í”„ë¡œì íŠ¸

1. ì¡°ëª…, ì¡°ì›
2. ì£¼ì œ
3. ê¸°ëŠ¥ ëª…ì„¸
4. ì—­í•  ë¶„ë‹´
5. db ì„¤ê³„
6. í™”ë©´ì˜ íë¦„ë„
7. íŒ¨í‚¤ì§€ëª… í´ë”ëª… ì»¨íŠ¸ë¡¤ëŸ¬, ëª¨ë¸, ë·°